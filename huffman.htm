<html>
<head>
<script type="text/javascript">
function generate(n)
{
	var A = new Array();
	var i, rep, j;
	for (i = 0; i < n; i++)
	{
		next = Math.floor((Math.random())*100);
		rep = Math.floor((Math.random())*10);
		for (j = 0; j < rep; j++)
			A[A.length] = next;
	}

	return A;
}

function linsear(set, elmnt)
{
	var i;
	var ans = false;

	for (i = 0; i < set.length && !ans; i++)
		if (set[i] == elmnt)
			ans = true;

	return ans;
}

function count(set, elmnt)
{
	var i;
	var ans = 0;

	for (i = 0; i < set.length; i++)
		if (set[i] == elmnt)
			ans++;

	return ans;
}

function prob(set, elmnt)
{
	var ans = count(set, elmnt) / set.length;
	return ans;
}

function SortByB(A, B) 
{
	var i, j, temp;
	for (i = 0; i < B.length; i++)
		for (j = i; j < B.length; j++)
			if (B[i] < B[j])
			{
				temp = A[i];
				A[i] = A[j];
				A[j] = temp;

				temp = B[i];
				B[i] = B[j];
				B[j] = temp;
			}
}

function huffman(set)
{
	var curr = new Array();
	var probs = new Array();
	var temp = new Array();
	var parent = new Array();
	var text = "", loc1, loc2, count = 0;

	var i;
	for (i = 0; i < set.length; i++)
	{
		if (!linsear(curr, set[i]))
		{
			curr[curr.length] = set[i];
			probs[probs.length] = Math.round(prob(set, set[i])*100)/100;
		}
	}

	SortByB(curr, probs);
	text += "curr = " + curr + "<br>";
	text += "probs = " + probs + "<br>";
//	count = probs.length;

	while (probs[probs.length-1] <= 1)
	{
		SortByB(curr, probs);

		text += "<table><tr>";
		for (i = 0; i < curr.length; i++)
			text += "<td>" + curr[i] + "</td>";
		text += "</tr><tr>";

		for (i = 0; i < probs.length; i++)
			text += "<td>" + probs[i] + "</td>";
		text += "</tr></table>";

		loc1 = curr.length-2;
		loc2 = curr.length-1;
		
		temp[temp.length] = "(" + curr[loc1] + ", " + curr[loc2] + ")";
		curr[curr.length] = "(" + curr[loc1] + ", " + curr[loc2] + ")";
		
		parent[loc1] = probs.length;
		parent[loc2] = probs.length;
		probs[probs.length] = probs[loc1] + probs[loc2];
		probs[loc1] = 1;
		probs[loc2] = 1;
	}

	document.getElementById("output").innerHTML += text;
	return parent;
}

function init(set, k1)
{
	var set = generate(k1);
	var ans = new Array();

	var text = "";

	text += "k1 = " + k1 + "\n";
	
	text += "set = {";
	for (var i = 0; i < set.length; i++)
	{
		if (i < set.length - 1)
			text += set[i] + ", ";
		else
			text += set[i];
		ans[ans.length] = set[i];
	}
	text += "}\n";

	document.getElementById("list").value = text;
	return ans;
}

function retreive(set, start, finish)
{
	var i;
	var ans = new Array();
	for (i = start; i < finish; i++)
		ans[ans.length] = set[i];

	return ans;
}
</script>
</head>
<body>
<p>
</p>
<form name=data id=data> 
<input type=button onclick="k1 = Math.floor(Math.random()*20)+5;ans = init(set1, k1);set1 = retreive(ans, 0, ans.length);document.getElementById('output').innerHTML = ''" value="New Problem"><br> 
<TEXTAREA style="WIDTH: 350px; HEIGHT: 150px" id=list cols=41 rows=6 name=list></TEXTAREA><br>
<input type="checkbox" name="show" id="show">Show Work?
<input type="button" value="Huffman Coding" onclick="document.getElementById('output').innerHTML = '';ans = huffman(set1); document.getElementById('output').innerHTML += ans;">  
</FORM>
<script type="text/javascript">
var k1 = Math.floor(Math.random()*20)+5;
var set1 = new Array();
var elmnt;
var ans = init(set1, k1);
set1 = retreive(ans, 0, ans.length);
</script>
<p name="output" id="output">
</p>
</body>
</html>