<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type='text/javascript'>
function lcsLength(x, y)
{
	if (x.indexOf(",") != -1)
	{
		x = x.split(",");
	}
	else
	{
		x = x.split("");
	}
	
	if (y.indexOf(",") != -1)
	{
		y = y.split(",");
	}
	else
	{
		y = y.split("");
	}
	
	var m = x.length;
	var n = y.length;

	var c = new Array();
	var b = new Array();
	
	for (var i = -1; i < m; i++)
	{
		c[i] = new Array();
		b[i] = new Array();
	}
	
	for (var i = -1; i < m; i++)
	{
		c[i][-1] = 0;
		b[i][-1] = -1;
	}
	
	for (var j = 0; j < n; j++)
	{
		c[-1][j] = 0;
		b[-1][j] = -1;
	}
	
	for (var i = 0; i < m; i++)
	{
		for (var j = 0; j < n; j++)
		{
			if (x[i] == y[j])
			{
				c[i][j] = c[i-1][j-1] + 1;
				b[i][j] = 0;
			}
			else if (c[i-1][j] >= c[i][j-1])
			{
				c[i][j] = c[i-1][j];
				b[i][j] = 1;
			}
			else 
			{
				c[i][j] = c[i][j-1];
				b[i][j] = 2;
			}
		}
	}
	
	var ans = printLCS(b, m-1, n-1);
	var out = new Array();
	
	for (var i = 0; i < ans.length; i++)
	{
		out.push(x[ans[i][0]]);
	}
	
	var text = "<center><table>";
	text += "<tr><td></td><td></td>";
	for (var j = 0; j < n; j++)
	{
		text += "<td>" + y[j] + "</td>";
	}

	for (var i = -1; i < m; i++)
	{	
		text += "<tr><td>";
		if (i >= 0)
			text += x[i];
		
		text += "</td>";
		
		for (var j = -1; j < n; j++)
		{
			var found = false;
			for (var k = 0; k < ans.length && !found; k++)
			{
				if (ans[k][0] == i && ans[k][1] == j)
				{
					found = true;
				}
			}
			
			if (found)
			{
				text += "<td style='background:rgba(255, 0, 0, .33)'>" + c[i][j] + "</td>";
			}
			else
			{
				text += "<td>" + c[i][j] + "</td>";
			}
		}
		
		text += "</tr>";
	}
	
	text += "</table></center>";
	
	return [c, b, text, out];
}

function printLCS(b, i, j)
{
	out = new Array();
	if (i == -1 || j == -1)
	{
		return;
	}
	
	if (b[i][j] == 0)
	{
		out.push(printLCS(b, i-1, j-1));
		out.push([i, j]);
	}
	else if (b[i][j] == 1)
	{
		out.push(printLCS(b, i-1, j));
	}
	else
	{
		out.push(printLCS(b, i, j-1));
	}
	
	return out;
}

function init()
{
	var string1 = new Array();
	var string2 = new Array();
	
	var len1 = Math.floor(Math.random() * 25) + 5;
	var len2 = Math.floor(Math.random() * 25) + 5;
	
	for (var i = 0; i < len1; i++)
	{
		string1[i] = Math.floor(Math.random() * 5);
		if (string1[i] == 0)
		{
			string1[i] = "A";
		}
		else if (string1[i] == 1)
		{
			string1[i] = "B";
		}
		else if (string1[i] == 2)
		{
			string1[i] = "C";
		}
		else if (string1[i] == 3)
		{
			string1[i] = "D";
		}
		else if (string1[i] == 4)
		{
			string1[i] = "E";
		}
	}
	
	for (var i = 0; i < len2; i++)
	{
		string2[i] = Math.floor(Math.random() * 5);
		if (string2[i] == 0)
		{
			string2[i] = "A";
		}
		else if (string2[i] == 1)
		{
			string2[i] = "B";
		}
		else if (string2[i] == 2)
		{
			string2[i] = "C";
		}
		else if (string2[i] == 3)
		{
			string2[i] = "D";
		}
		else if (string2[i] == 4)
		{
			string2[i] = "E";
		}
	}
	
	return [string1, string2];
}

function restart()
{
	var strings = init();
	document.getElementById("string1").value = strings[0];
	document.getElementById("string2").value = strings[1];
	document.getElementById("output").innerHTML = "";
}
</script>
</head>
<body>
<input id="string1" size=50><br>
<input id="string2" size=50><br>
<p id="output"></p>
<script type="text/javascript">
restart();
</script>
<input type="button" value="Calculate" onclick="ans = lcsLength(document.getElementById('string1').value, document.getElementById('string2').value); document.getElementById('output').innerHTML = ans[2] + '<br>' + ans[3]">
<input type="button" value="Restart" onclick="restart()">
</body>
</html>